<div class="mt-[80px] max-w-md mx-auto p-6 space-y-8 bg-gray-50 min-h-screen">

  <div class="flex items-center justify-between px-2">
    <div class="flex items-center gap-4">
      <div class="relative">
        <img
          [src]="'https://ui-avatars.com/api/?background=6366f1&color=fff&name=' + user()?.name"
          class="w-16 h-16 rounded-[2rem] border-4 border-white shadow-xl object-cover"
        >
        <div class="absolute -bottom-1 -right-1 bg-emerald-500 w-5 h-5 rounded-full border-4 border-gray-50"></div>
      </div>

      <div>
        <h2 class="text-xl font-black text-gray-900 leading-tight">
          {{ user()?.name || 'Utilisateur' }}
        </h2>
        <div class="flex gap-2 mt-1">
          <span class="px-2 py-0.5 rounded-lg bg-indigo-100 text-indigo-600 text-[8px] font-black uppercase tracking-wider">
            {{ isExpert() ? '‚≠ê Expert' : '‚öΩ Amateur' }}
          </span>
          <span class="px-2 py-0.5 rounded-lg bg-gray-200 text-gray-500 text-[8px] font-black uppercase tracking-wider">
            ID: #{{ user()?.id?.slice(0, 5) }}
          </span>
        </div>
      </div>
    </div>

  </div>

  <div class="bg-indigo-600 rounded-3xl p-8 text-white shadow-2xl relative overflow-hidden">
    <div class="relative z-10">
      <h1 class="text-sm font-bold opacity-80 uppercase tracking-tighter">Mon Score Total</h1>
      <div class="text-6xl font-black mt-2">
        {{ stats().totalPoints }} <span class="text-xl">pts</span>
      </div>
      <div class="grid grid-cols-3 gap-4 mt-8 border-t border-white/20 pt-6">
        <div class="text-center">
          <div class="text-xl font-black">{{ stats().exactScores }}</div>
          <div class="text-[9px] opacity-70 uppercase font-bold">Scores Exacts</div>
        </div>
        <div class="text-center border-x border-white/20">
          <div class="text-xl font-black">{{ stats().correctWinners }}</div>
          <div class="text-[9px] opacity-70 uppercase font-bold">Vainqueurs</div>
        </div>
        <div class="text-center">
          <div class="text-xl font-black">{{ stats().efficiency }}%</div>
          <div class="text-[9px] opacity-70 uppercase font-bold">Pr√©cision</div>
        </div>
      </div>
    </div>
    <div class="absolute -right-10 -top-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"></div>
  </div>

  <div class="space-y-4">
    <h2 class="text-xs font-black text-gray-400 uppercase tracking-widest px-2">
      √âvolution Match par Match
    </h2>

    <div class="space-y-3">
      @for (item of history(); track item.match.id) {
      <div
        class="bg-white rounded-2xl p-4 shadow-sm border border-gray-100 flex items-center gap-4 transition-all hover:scale-[1.02]"
      >
        <div
          [ngClass]="{
            'bg-emerald-500 shadow-emerald-200': item.points >= 5,
            'bg-indigo-500 shadow-indigo-200':
              item.points > 0 && item.points < 5,
            'bg-gray-300 shadow-gray-100': item.points === 0
          }"
          class="w-14 h-14 rounded-full flex flex-col items-center justify-center text-white shadow-lg shrink-0"
        >
          <span class="text-[10px] font-bold leading-none">PTS</span>
          <span class="text-sm font-black"
            >+{{ item.points | number : "1.1-1" }}</span
          >
        </div>

        <div class="flex-1">
          <div class="text-[10px] text-gray-400 font-bold uppercase mb-1">
            {{ item.date | date : "dd MMM" }} ‚Ä¢ {{ item.match.stage }}
          </div>
          <div class="text-xs font-bold text-gray-800">
            {{ item.match.team_a_data?.team_name_fr }} vs
            {{ item.match.team_b_data?.team_name_fr }}
          </div>
          <div class="text-[10px] mt-1 italic text-gray-500">
            Ton prono: {{ item.prono.score_a }}-{{ item.prono.score_b }} (R√©el:
            {{ item.match.score_a }}-{{ item.match.score_b }})
          </div>
        </div>

        <div class="text-right">
          @if (item.points >= 8) {
          <span class="text-xl" title="Score Exact !">üéØ</span>
          } @else if (item.points > 0) {
          <span class="text-xl">‚úÖ</span>
          } @else {
          <span class="text-xl">‚ùå</span>
          }
        </div>
      </div>
      } @empty {
      <div
        class="text-center py-10 bg-white rounded-3xl border-2 border-dashed border-gray-200"
      >
        <p class="text-gray-400 text-sm font-medium">
          Aucun match termin√© pour le moment.
        </p>
      </div>
      }
    </div>
  </div>
</div>
