<section class="mb-10">
  <button
    (click)="toggleForm()"
    [ngClass]="isFormVisible() ? 'bg-gray-100 text-gray-600' : 'bg-indigo-600 text-white shadow-indigo-100'"
    class="flex items-center gap-2 px-6 py-3 rounded-2xl font-black text-xs uppercase tracking-widest transition-all shadow-lg hover:scale-105 active:scale-95"
  >
    @if (isFormVisible()) {
      <span>✖ Annuler</span>
    } @else {
      <span class="text-lg leading-none">+</span>
      <span>Ajouter un nouveau match</span>
    }
  </button>

  @if (isFormVisible()) {
    <div class="mt-6 bg-white p-8 rounded-[2rem] shadow-xl border border-indigo-50 animate-in slide-in-from-top-4 duration-300">
      <h3 class="text-xl font-black text-gray-900 mb-6">Configuration du Match</h3>

      <form [formGroup]="matchForm" (ngSubmit)="onSubmit()" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 items-end">

        <div class="space-y-2">
          <label class="text-[10px] font-black text-gray-400 uppercase ml-1">Équipe Domicile</label>
          <select formControlName="team_a" class="w-full bg-gray-50 border-none rounded-xl p-3 text-sm font-bold focus:ring-2 focus:ring-indigo-500">
            <option [ngValue]="null">Sélectionner...</option>
            @for (team of teams; track team.id) {
              <option [value]="team.id">{{ team.team_name_fr }}</option>
            }
          </select>
        </div>

        <div class="space-y-2">
          <label class="text-[10px] font-black text-gray-400 uppercase ml-1">Équipe Extérieur</label>
          <select formControlName="team_b" class="w-full bg-gray-50 border-none rounded-xl p-3 text-sm font-bold focus:ring-2 focus:ring-indigo-500">
            <option [ngValue]="null">Sélectionner...</option>
            @for (team of teams; track team.id) {
              <option [value]="team.id">{{ team.team_name_fr }}</option>
            }
          </select>
        </div>

        <div class="space-y-2">
          <label class="text-[10px] font-black text-gray-400 uppercase ml-1">Coup d'envoi</label>
          <input type="datetime-local" formControlName="kickoff_time" class="w-full bg-gray-50 border-none rounded-xl p-3 text-sm font-bold focus:ring-2 focus:ring-indigo-500">
        </div>

        <div class="space-y-2">
          <label class="text-[10px] font-black text-gray-400 uppercase ml-1">Phase du tournoi</label>
          <select formControlName="status" class="w-full bg-gray-50 border-none rounded-xl p-3 text-sm font-bold focus:ring-2 focus:ring-indigo-500">
            @for (s of stages; track s) {
              <option [value]="s">{{ s }}</option>
            }
          </select>
        </div>

        <div class="lg:col-span-4 flex justify-end mt-4">
          <button
            type="submit"
            [disabled]="matchForm.invalid"
            class="bg-indigo-600 text-white px-10 py-4 rounded-2xl font-black uppercase text-xs tracking-widest hover:bg-indigo-700 disabled:opacity-30 disabled:cursor-not-allowed transition-all shadow-lg shadow-indigo-100"
          >
            Créer la fiche de match
          </button>
        </div>
      </form>
    </div>
  }
</section>
